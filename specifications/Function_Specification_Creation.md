# RecipeDesk --- Functional Specification（機能仕様書）

Version: 1.0\
Author: 前原 裕輝\
Updated: 2025-12-03

------------------------------------------------------------------------

# 1. 概要

RecipeDesk は「レシピの登録・一覧表示・詳細閲覧」を行う Tkinter
デスクトップアプリである。\
本仕様書では、アプリ全体の
**機能要件・データ構造・振る舞い・例外処理ルール** を定義する。

対象機能： - レシピの登録（Create） - レシピの一覧表示（Read List） -
レシピの詳細表示（Read Detail） - レシピ間ナビゲーション（Next/Prev,
loop） - 画像アップロード（Explorer + Drag & Drop） - CSV
を用いたデータ管理（簡易 DB）

------------------------------------------------------------------------

# 2. 機能一覧

  ---------------------------------------------------------------------------------------------------------
  機能ID                       名称                        説明
  ---------------------------- --------------------------- ------------------------------------------------
  F-01                         レシピ登録                  入力フォームに基づき CSV へ保存する

  F-02                         レシピ一覧表示              サムネイル画像＋タイトルのカードを複数表示する

  F-03                         レシピ詳細表示              1レシピの内容を閲覧する

  F-04                         レシピ間移動（戻る/次へ）   詳細画面で前後のレシピにループ移動

  F-05                         画像アップロード            Explorer選択 + Drag&Drop に対応

  F-06                         CSVデータ管理               読み込み、追加、ID採番、空白補完処理

  F-07                         画面切替（Controller）      ヘッダーから全画面間を遷移できる
  ---------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------

# 3. CSV 構造仕様

## 3.1 ファイル

    /data/recipes.csv

## 3.2 カラム仕様

  カラム名         説明       型    備考
  ---------------- ---------- ----- --------------------
  id               レシピID   int   自動採番
  title            タイトル   str   必須
  image_path       画像パス   str   `/images` 内で管理
  ingredient1〜9   材料       str   空欄可
  step1〜6         作り方     str   空欄可

## 3.3 保存ルール

-   材料数が9未満 → 残りは空文字で埋める\
-   手順数が6未満 → 残りは空文字で埋める\
-   画像未選択時 → 空文字\
-   新規登録時は **id = 最大ID+1**

------------------------------------------------------------------------

# 4. 機能詳細仕様

------------------------------------------------------------------------

# F-01：レシピ登録機能（CreateView）

## 入力項目

  項目       必須   説明
  ---------- ------ -----------------
  タイトル   ○      文字列
  材料1〜9   ×      未入力可
  手順1〜6   ×      未入力可
  画像       ×      Explorer or D&D

## 処理フロー

1.  入力フォームから値を取得\
2.  材料・手順の不足分を空文字で埋める\
3.  画像ファイルがある場合は `/images` にコピー\
4.  CSV に新規行を追加\
5.  処理完了後、一覧画面へ遷移

## エラー処理

-   タイトル空欄 → 登録不可アラート\
-   読み取り専用 CSV の場合 → 書き込みエラー表示

------------------------------------------------------------------------

# F-02：レシピ一覧表示（ListView）

## 表示内容

-   サムネイル画像（100〜200px にリサイズ）
-   タイトル

## 挙動

-   2列×N行でカード表示\
-   カードクリック → 詳細画面へ遷移\
-   CSV が空の場合 → 「レシピがありません」表示

------------------------------------------------------------------------

# F-03：レシピ詳細表示（DetailView）

## 表示内容

-   タイトル
-   画像（左）
-   材料（右）
-   手順（下）

## ナビゲーション

  ボタン   動作
  -------- ------------------------------------------
  戻る     前のレシピへ移動（最初なら最後へループ）
  次へ     次のレシピへ移動（最後なら最初へループ）
  一覧へ   ListView へ戻る

## エラー処理

-   画像ファイルが見つからない → 代替画像に差し替え

------------------------------------------------------------------------

# F-04：画像アップロード機能

## 機能内容

-   Explorer を開いて選択\
-   画面上への Drag & Drop に対応\
-   プレビュー表示あり\
-   `/images` にコピーして管理

## 非対応画像の扱い

-   未対応フォーマット（例：svg）はエラー表示

------------------------------------------------------------------------

# F-05：画面遷移（Controller）

## 仕様

-   すべての View は `Frame` として構築\
-   Controller が現在の View を破棄し、新しい View を生成する

## 画面遷移表

  遷移元   アクション         遷移先
  -------- ------------------ ------------
  一覧     カードクリック     詳細
  一覧     ヘッダー「登録」   登録
  登録     Submit             一覧
  詳細     戻る/次へ          詳細内移動
  詳細     ヘッダー「一覧」   一覧

------------------------------------------------------------------------

# 5. データ補完仕様

### 材料（Ingredients）

-   絶対に9枠揃える\
-   例：入力が3つ → 4〜9枠は "" にする

### 手順（Steps）

-   絶対に6枠揃える\
-   例：入力が4つ → 5〜6枠は "" にする

------------------------------------------------------------------------

# 6. 例外処理ポリシー

  状況               処理方針
  ------------------ ------------------------
  CSV破損            新規作成 or エラー表示
  画像ファイルなし   デフォルト画像表示
  権限不足           エラー表示
  不正ID             一覧へ強制戻り

------------------------------------------------------------------------

# 7. 非機能要件（簡易）

-   1日開発可能なシンプル構成\
-   外部DBは使わない\
-   ライブラリは Tkinter / Pillow / CSV のみ\
-   画面遷移は高速（1秒以内）

------------------------------------------------------------------------

# 8. 開発フォルダ構成（想定）

    src/
      controller/
        app_controller.py
      model/
        recipe_model.py
      view/
        common_header.py
        list_view.py
        detail_view.py
        create_view.py
      images/
      data/
        recipes.csv
      docs/
        screen_spec.md
        function_spec.md

------------------------------------------------------------------------

# 以上
